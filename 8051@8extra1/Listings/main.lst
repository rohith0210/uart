C51 COMPILER V9.60.7.0   MAIN                                                              07/01/2025 14:10:51 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main.lst) TA
                    -BS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <reg51.h>
   2          
   3          // LED on P1.0
   4          sbit LED = P1^0;
   5          
   6          // Initialize UART @9600 baud using Timer1 Mode2
   7          void UART_Init() {
   8   1          TMOD = 0x20;   // Timer1, Mode 2 (8-bit auto-reload)
   9   1          TH1 = 0xFD;     // Reload value for 9600 baud @11.0592 MHz
  10   1          SCON = 0x50;    // Serial mode 1, REN=1
  11   1          TR1 = 1;        // Start Timer1
  12   1      }
  13          
  14          // Transmit one character, wait for TI
  15          void UART_Tx(char c) {
  16   1          SBUF = c;
  17   1          while (!TI);
  18   1          TI = 0;
  19   1      }
  20          
  21          // Receive one character, wait for RI
  22          char UART_Rx() {
  23   1          while (!RI);
  24   1          RI = 0;
  25   1          return SBUF;
  26   1      }
  27          
  28          // Send a null-terminated string
  29          //void UART_TxString(char *s) {
  30            //  while (*s) {
  31              //    UART_Tx(*s++);
  32              //}
  33          //}
  34          void UART_TxString(char s[]) {
  35   1          int i = 0;
  36   1          while (s[i] != '\0') {
  37   2              UART_Tx(s[i]);
  38   2              i++;
  39   2          }
  40   1      }
  41          
  42          void main() {
  43   1          char cmd;
  44   1          
  45   1          LED = 0;              // Ensure LED off at start
  46   1          UART_Init();          // Set up serial
  47   1      
  48   1          UART_TxString("\r\nUART-LED Toggle Ready!\r\n");
  49   1          UART_TxString("Send '1' to turn ON, '0' to turn OFF\r\n> ");
  50   1      
  51   1          while (1) {
  52   2              cmd = UART_Rx();        // Wait for user key
  53   2              
  54   2              if (cmd == '1') {
C51 COMPILER V9.60.7.0   MAIN                                                              07/01/2025 14:10:51 PAGE 2   

  55   3                  LED = 1;            // Turn LED on
  56   3                  UART_TxString("\r\nLED ON\r\n> ");
  57   3              }
  58   2              else if (cmd == '0') {
  59   3                  LED = 0;            // Turn LED off
  60   3                  UART_TxString("\r\nLED OFF\r\n> ");
  61   3              }
  62   2              else {
  63   3                  UART_TxString("\r\nInvalid. Send '1' or '0'\r\n> ");
  64   3              }
  65   2          }
  66   1      }
  67          
  68          
  69          /*
  70          #include<reg51.h>
  71          sbit LED = P1^0;
  72          
  73          void UART_Init(){
  74            TMOD = 0x20;
  75            TH1 = 0xFD;
  76            SCON = 0x50;
  77            TR1 =1;
  78          }
  79          
  80          void UART_Tx(char c){
  81           SBUF = c;
  82            while(TI == 0);
  83            TI = 0;
  84          }
  85          char UART_Rx(){
  86           
  87            while(RI == 0);
  88            RI = 0;
  89            return SBUF;
  90          }
  91          
  92          void UART_TxString(char s[]) {
  93              int i = 0;
  94              while (s[i] != '\0') {
  95                  UART_Tx(s[i]);
  96                  i++;
  97              }
  98          }
  99          void main(){
 100            char cmd;
 101            UART_Init();
 102            UART_TxString("\r\nyou can give input either 0 or 1\r\n> ");
 103            
 104            while(1){
 105             if(cmd == 1){
 106               LED = 1;
 107               UART_TxString("LED was turned on\n");
 108             }
 109             else if (cmd ==0){
 110              LED =0;
 111               UART_TxString("\r\nLED Off\r\n> ");
 112             }
 113             else {
 114             UART_TxString("\r\invalid\r\n> ");
 115             
 116             }
C51 COMPILER V9.60.7.0   MAIN                                                              07/01/2025 14:10:51 PAGE 3   

 117               
 118               
 119             }
 120          
 121          }
 122          */


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    131    ----
   CONSTANT SIZE    =    126    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
